<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mappings PUBLIC
  "-//Penrose/DTD Mappings ${product.specification}//EN"
  "http://penrose.safehaus.org/dtd/mappings.dtd">

<mappings>

  <mapping name="ImportIPAGroup">

    <rule name="dn">
      <expression>
return "CN="+ipa.cn+",CN=Users,DC=domain1,DC=com";
      </expression>
    </rule>

    <rule name="objectClass">
      <constant>group</constant>
    </rule>

    <rule name="cn">
      <variable>ipa.cn</variable>
    </rule>
    <rule name="sAMAccountName">
      <variable>ipa.cn</variable>
    </rule>
    <rule name="description">
      <variable>ipa.description</variable>
    </rule>
    <rule name="member">
      <expression>
if (ipa.member == void || ipa.member == null) return null;
return module.transformSourceMembers(session, ipa.member);
      </expression>
    </rule>

  </mapping>

  <mapping name="ImportIPAGroup2">

    <rule name="objectClass" action="add">
      <constant>extensibleObject</constant>
    </rule>

    <rule name="objectGUID">
      <variable>samba.objectGUID</variable>
    </rule>
    <rule name="objectSid">
      <variable>samba.objectSid</variable>
    </rule>

  </mapping>

  <mapping name="SyncIPAGroup">

    <rule name="cn">
      <variable>ipa.cn</variable>
    </rule>
    <rule name="description">
      <variable>ipa.description</variable>
    </rule>
    <rule name="member">
      <expression>
if (ipa.member == void || ipa.member == null) return null;
return module.transformSourceMembers(session, ipa.member);
      </expression>
    </rule>

  </mapping>

  <mapping name="SyncIPAGroup2">

    <rule name="objectClass" action="add">
      <constant>extensibleObject</constant>
    </rule>

    <rule name="objectGUID">
      <variable>samba.objectGUID</variable>
    </rule>
    <rule name="objectSid">
      <variable>samba.objectSid</variable>
    </rule>

  </mapping>

  <mapping name="UnlinkIPAGroup">

  </mapping>

  <mapping name="UnlinkIPAGroup2">

    <rule name="objectClass" action="delete">
      <constant>extensibleObject</constant>
    </rule>

    <rule name="objectGUID" action="delete"/>
    <rule name="objectSid" action="delete"/>

  </mapping>

</mappings>